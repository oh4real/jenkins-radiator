"use strict";angular.module("bvRadiatorApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/radiator/:project",{templateUrl:"partials/radiator.html",controller:"RadiatorController"}).otherwise({redirectTo:"/radiator/All"})}]),angular.module("bvRadiatorApp").controller("RadiatorController",["$scope","$routeParams","$interval","$http","$route","$timeout",function(a,b,c,d,e,f){a.project=b.project,a.jobs={stableJobs:[],failedJobs:[],disabled:[],unknownJobs:[]};var g=null;a.$on("$destroy",function(){g&&c.cancel(g)});var h=function(){angular.isDefined(b.project)&&(g=c(function(){j()},5e3))},i=function(a){var b=Date.now(),c=a.timestamp,d=a.estimatedDuration;return 100>100*(b-c)/d?100*(b-c)/d:100},j=function(){var c="/view/:project/api/json?depth=2";b.project&&d.get(c.replace(":project",b.project),{cache:!1}).success(function(b){var c={stableJobs:[],failedJobs:[],disabledJobs:[],unknownJobs:[]};angular.forEach(b.jobs,function(a){0===a.color.indexOf("blue")||0===a.color.indexOf("yellow")||0===a.color.indexOf("aborted")?c.stableJobs.push(a):0===a.color.indexOf("red")?c.failedJobs.push(a):0===a.color.indexOf("disabled")?(a.color="disabledJob",c.disabledJobs.push(a)):c.unknownJobs.push(a),a.color.indexOf("_anime")>1?(a.inprogress=!0,a.percentCompleted=i(a.builds[0])):(a.inprogress=!1,a.percentCompleted="")}),a.jobs=c})},k=function(){f(function(){e.reload()},288e5)};j(),h(),k()}]),angular.module("bvRadiatorApp").directive("jenkinsViewMenu",function(){return{templateUrl:"partials/jenkins-view-menu.html",controller:["$scope","$http","$location",function(a,b,c){a.views=[],b.get("/api/json").success(function(b){angular.forEach(b.views,function(b){var c=b.url.match(/\/view\/(.*)\/$/);c&&(b.project=c[1].replace("%20"," "),a.views.push(b))})}),a.goToView=function(){var b="/radiator/"+a.selectedView.project;c.path(b)}}],scope:{}}});